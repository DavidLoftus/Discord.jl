<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Client · Discord.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="index.html"><img class="logo" src="assets/logo.png" alt="Discord.jl logo"/></a><h1>Discord.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><a class="toctext" href="tutorial.html">Tutorial</a></li><li class="current"><a class="toctext" href="client.html">Client</a><ul class="internal"><li><a class="toctext" href="#Client-1">Client</a></li><li><a class="toctext" href="#Event-Handlers-1">Event Handlers</a></li><li><a class="toctext" href="#Gateway-Commands-1">Gateway Commands</a></li></ul></li><li><a class="toctext" href="events.html">Events</a></li><li><a class="toctext" href="rest.html">REST API</a></li><li><a class="toctext" href="types.html">Types</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="client.html">Client</a></li></ul><a class="edit-page" href="https://github.com/PurgePJ/Discord.jl/blob/master/docs/src/client.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Client</span><a class="fa fa-bars" href="#"></a></div></header><h2><a class="nav-anchor" id="Client-1" href="#Client-1">Client</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.Client" href="#Discord.Client"><code>Discord.Client</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">Client(
    token::String;
    on_limit::OnLimit=LIMIT_IGNORE,
    ttl::Period=Hour(1),
    version::Int=6,
 ) -&gt; Client</code></pre><p>A Discord bot. <code>Client</code>s can connect to the gateway, respond to events, and make REST API calls to perform actions such as sending/deleting messages, kicking/banning users, etc.</p><p>To get a bot token, head <a href="https://discordapp.com/developers/applications">here</a> to create a new application. Once you&#39;ve created a bot user, you will have access to its token.</p><p><strong>Keywords</strong></p><ul><li><code>on_limit::OnLimit=LIMIT_IGNORE</code>: Client&#39;s behaviour when it hits a rate limit (see &quot;Rate Limiting&quot; below for more details).</li><li><code>ttl::Period=Hour(1)</code> Amount of time that cache entries are kept (see &quot;Caching&quot; below for more details).</li><li><code>version::Int=6</code>: Version of the Discord API to use. Using anything but 6 is not officially supported by the Discord.jl developers.</li></ul><p><strong>Caching</strong></p><p>By default, most data that comes from Discord is cached for later use. However, to avoid memory leakage, it&#39;s deleted after some time (determined by the <code>ttl</code> keyword). Although it&#39;s not recommended, you can also disable caching of certain data by clearing default handlers for relevant event types with <a href="client.html#Discord.clear_handlers!"><code>clear_handlers!</code></a>. For example, if you wanted to avoid caching any messages, you would clear handlers for <a href="events.html#Discord.MessageCreate"><code>MessageCreate</code></a> and <a href="events.html#Discord.MessageUpdate"><code>MessageUpdate</code></a> events.</p><p><strong>Rate Limiting</strong></p><p>Discord enforces rate limits on usage of its REST API. This  means you can  only send so many messages in a given period, and so on. To customize the client&#39;s behaviour when encountering rate limits, use the <code>on_limit</code> keyword and see <a href="rest.html#Discord.OnLimit"><code>OnLimit</code></a>.</p><p><strong>Sharding</strong></p><p>Sharding is handled automatically: The number of available processes is the number of shards that are created. See the <a href="https://github.com/PurgePJ/Discord.jl/blob/master/examples/sharding.jl">sharding example</a> for more details.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL59-L99">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.open" href="#Base.open"><code>Base.open</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">open(c::Client; delay::Period=Second(7))</code></pre><p>Connect to the Discord gateway and begin responding to events.</p><p>The <code>delay</code> keyword is the number of seconds between shards connecting. It can be increased from its default if you are frequently experiencing invalid sessions upon connection.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL146-L153">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.isopen" href="#Base.isopen"><code>Base.isopen</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">isopen(c::Client) -&gt; Bool</code></pre><p>Determine whether the client is connected to the gateway.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL205-L209">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close" href="#Base.close"><code>Base.close</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">Base.close(c::Client)</code></pre><p>Disconnect from the Discord gateway.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL212-L216">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.wait" href="#Base.wait"><code>Base.wait</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">wait(c::Client)</code></pre><p>Wait for an open client to close.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL222-L226">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.me" href="#Discord.me"><code>Discord.me</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">me(c::Client) -&gt; Union{User, Nothing}</code></pre><p>Get the client&#39;s bot user.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL229-L233">source</a></section><h2><a class="nav-anchor" id="Event-Handlers-1" href="#Event-Handlers-1">Event Handlers</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.add_handler!" href="#Discord.add_handler!"><code>Discord.add_handler!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">add_handler!(
    c::Client,
    evt::Type{&lt;:AbstractEvent},
    func::Function;
    tag::Symbol=gensym(),
    expiry::Union{Int, Period}=-1,
)</code></pre><p>Add a handler for an event type. The handler should be a function which takes two arguments: A <a href="client.html#Discord.Client"><code>Client</code></a> and an <a href="events.html#Discord.AbstractEvent"><code>AbstractEvent</code></a> (or a subtype). The handler is appended the event&#39;s current handlers.</p><p><strong>Keywords</strong></p><ul><li><code>tag::Symbol=gensym()</code>: A label for the handler, which can be used to remove it with <a href="client.html#Discord.delete_handler!"><code>delete_handler!</code></a>.</li><li><code>expiry::Union{Int, Period}=-1</code>: The handler&#39;s expiry. If an <code>Int</code> is given, the handler will run a set number of times before expiring. If a <code>Period</code> is given, the handler will expire after that amount of time has elapsed. The default of <code>-1</code> indicates no expiry.</li></ul><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>There is no guarantee on the order in which handlers run, except that catch-all (<a href="events.html#Discord.AbstractEvent"><code>AbstractEvent</code></a>) handlers run before specific ones.</p></div></div></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL333-L357">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.add_command!" href="#Discord.add_command!"><code>Discord.add_command!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">add_command!(
    c::Client,
    prefix::AbstractString,
    func::Function;
    tag::Symbol=gensym(),
    expiry::Union{Int, Period}=-1,
)</code></pre><p>Add a text command handler. The handler function should take two arguments: A <a href="client.html#Discord.Client"><code>Client</code></a> and a <a href="types.html#Discord.Message"><code>Message</code></a>. The keyword arguments are identical to <a href="client.html#Discord.add_handler!"><code>add_handler!</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL398-L410">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.delete_handler!" href="#Discord.delete_handler!"><code>Discord.delete_handler!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">delete_handler!(c::Client, evt::Type{&lt;:AbstractEvent}, tag::Symbol)</code></pre><p>Delete a single handler by event type and tag.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL380-L384">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.clear_handlers!" href="#Discord.clear_handlers!"><code>Discord.clear_handlers!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">clear_handlers!(c::Client, evt::Type{&lt;:AbstractEvent})</code></pre><p>Remove all handlers for an event type. Using this is generally not recommended because it also clears default handlers which maintain the client state. Instead, it&#39;s preferred add handlers with specific tags and delete them with <a href="client.html#Discord.delete_handler!"><code>delete_handler!</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL389-L395">source</a></section><h2><a class="nav-anchor" id="Gateway-Commands-1" href="#Gateway-Commands-1">Gateway Commands</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.request_guild_members" href="#Discord.request_guild_members"><code>Discord.request_guild_members</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">request_guild_members(
    c::Client,
    guild_id::Union{Snowflake, Vector{Snowflake};
    query::AbstractString=&quot;&quot;,
    limit::Int=0,
) -&gt; Bool</code></pre><p>Request offline guild members of one or more guilds. <a href="events.html#Discord.GuildMembersChunk"><code>GuildMembersChunk</code></a> events are sent by the gateway in response.</p><p>More details <a href="https://discordapp.com/developers/docs/topics/gateway#request-guild-members">here</a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL238-L250">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.update_voice_state" href="#Discord.update_voice_state"><code>Discord.update_voice_state</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">update_voice_state(
    c::Client,
    guild_id::Snowflake,
    channel_id::Union{Snowflake, Nothing},
    self_mute::Bool,
    self_deaf::Bool,
) -&gt; Bool</code></pre><p>Join, move, or disconnect from a voice channel. A <a href="events.html#Discord.VoiceStateUpdate"><code>VoiceStateUpdate</code></a> event is sent by the gateway in response.</p><p>More details <a href="https://discordapp.com/developers/docs/topics/gateway#update-voice-state">here</a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL273-L286">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.update_status" href="#Discord.update_status"><code>Discord.update_status</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">update_status(
    c::Client,
    since::Union{Int, Nothing},
    activity::Union{Activity, Nothing},
    status::PresenceStatus,
    afk::Bool,
) -&gt; Bool</code></pre><p>Indicate a presence or status update. A <a href="events.html#Discord.PresenceUpdate"><code>PresenceUpdate</code></a> event is sent by the gateway in response.</p><p>More details <a href="https://discordapp.com/developers/docs/topics/gateway#update-status">here</a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/e5f0e5ba70530a8782590becc833fd3b91fc5c92/src/client.jl#LL302-L315">source</a></section><footer><hr/><a class="previous" href="tutorial.html"><span class="direction">Previous</span><span class="title">Tutorial</span></a><a class="next" href="events.html"><span class="direction">Next</span><span class="title">Events</span></a></footer></article></body></html>
