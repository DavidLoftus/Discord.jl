<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Client · Discord.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="index.html"><img class="logo" src="assets/logo.png" alt="Discord.jl logo"/></a><h1>Discord.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li class="current"><a class="toctext" href="client.html">Client</a><ul class="internal"><li><a class="toctext" href="#Event-Handlers-1">Event Handlers</a></li><li><a class="toctext" href="#Bot-Commands-1">Bot Commands</a></li><li><a class="toctext" href="#Gateway-Commands-1">Gateway Commands</a></li><li><a class="toctext" href="#Caching-1">Caching</a></li><li><a class="toctext" href="#Sharding-1">Sharding</a></li></ul></li><li><a class="toctext" href="events.html">Events</a></li><li><a class="toctext" href="rest.html">REST API</a></li><li><a class="toctext" href="helpers.html">Helpers</a></li><li><a class="toctext" href="types.html">Types</a></li><li><a class="toctext" href="tutorial.html">Tutorial</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="client.html">Client</a></li></ul><a class="edit-page" href="https://github.com/PurgePJ/Discord.jl/blob/master/docs/src/client.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Client</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Client-1" href="#Client-1">Client</a></h1><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.Client" href="#Discord.Client"><code>Discord.Client</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">Client(
    token::String;
    presence::Union{Dict, NamedTuple}=Dict(),
    ttls::Dict{DataType,Union{Nothing, Period}}=Dict(),
    version::Int=6,
) -&gt; Client</code></pre><p>A Discord bot. <code>Client</code>s can connect to the gateway, respond to events, and make REST API calls to perform actions such as sending/deleting messages, kicking/banning users, etc.</p><p><strong>Keywords</strong></p><ul><li><code>presence::Union{Dict, NamedTuple}=Dict()</code>: Bot user&#39;s presence set upon connection. The schema <a href="https://discordapp.com/developers/docs/topics/gateway#update-status-gateway-status-update-structure">here</a> must be followed.</li><li><code>ttls::Dict{DataType,Union{Nothing, Period}}=Dict()</code>: Cache lifetime overrides. Values of <code>nothing</code> indicate no expiry. Keys can be any of the following: <a href="types.html#Discord.Guild"><code>Guild</code></a>, <a href="types.html#Discord.DiscordChannel"><code>DiscordChannel</code></a>, <a href="types.html#Discord.Message"><code>Message</code></a>, <a href="types.html#Discord.User"><code>User</code></a>, <a href="types.html#Discord.Member"><code>Member</code></a>, or <a href="types.html#Discord.Presence"><code>Presence</code></a>. For most workloads, the defaults are sufficient.</li><li><code>version::Int=6</code>: Version of the Discord API to use. Using anything but 6 is not officially supported by the Discord.jl developers.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/client.jl#LL45-L66">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.open" href="#Base.open"><code>Base.open</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">open(c::Client; delay::Period=Second(7))</code></pre><p>Connect a <a href="client.html#Discord.Client"><code>Client</code></a> to the Discord gateway.</p><p>The <code>delay</code> keyword is the time between shards connecting. It can be increased from its default if you are frequently experiencing invalid sessions upon connection.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/gateway.jl#LL30-L37">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.isopen" href="#Base.isopen"><code>Base.isopen</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">isopen(c::Client) -&gt; Bool</code></pre><p>Determine whether the <a href="client.html#Discord.Client"><code>Client</code></a> is connected to the gateway.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/gateway.jl#LL91-L95">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close" href="#Base.close"><code>Base.close</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">close(c::Client)</code></pre><p>Disconnect the <a href="client.html#Discord.Client"><code>Client</code></a> from the Discord gateway.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/gateway.jl#LL98-L102">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.wait" href="#Base.wait"><code>Base.wait</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">wait(c::Client)</code></pre><p>Wait for an open <a href="client.html#Discord.Client"><code>Client</code></a> to close.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/gateway.jl#LL108-L112">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.me" href="#Discord.me"><code>Discord.me</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">me(c::Client) -&gt; Union{User, Nothing}</code></pre><p>Get the <a href="client.html#Discord.Client"><code>Client</code></a>&#39;s bot user.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/client.jl#LL123-L127">source</a></section><h2><a class="nav-anchor" id="Event-Handlers-1" href="#Event-Handlers-1">Event Handlers</a></h2><p>See <a href="events.html#Events-1">Events</a> for more details.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.add_handler!" href="#Discord.add_handler!"><code>Discord.add_handler!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">add_handler!(
    c::Client,
    T::Type{&lt;:AbstractEvent},
    func::Function;
    tag::Symbol=gensym(),
    expiry::Union{Int, Period, Nothing}=nothing,
)
add_handler!(
    func::Function;
    c::Client,
    T::Type{&lt;:AbstractEvent},
    tag::Symbol=gensym(),
    expiry::Union{Int, Period, Nothing}=nothing,
)</code></pre><p>Add an event handler. The handler should be a function which takes two arguments: A <a href="client.html#Discord.Client"><code>Client</code></a> and an <a href="events.html#Discord.AbstractEvent"><code>AbstractEvent</code></a> (or a subtype). The handler is appended to the event&#39;s current handlers. You can also define a single handler for multiple event types by using a <code>Union</code>. <code>do</code> syntax is also accepted.</p><p><strong>Keywords</strong></p><ul><li><code>tag::Symbol=gensym()</code>: A label for the handler, which can be used to remove it with <a href="client.html#Discord.delete_handler!"><code>delete_handler!</code></a>.</li><li><code>expiry::Union{Int, Period, Nothing}=nothing</code>: The handler&#39;s expiry. If an <code>Int</code> is given, the handler will run that many times before expiring. If a <code>Period</code> is given, the handler will expire after it elapsed. The default of <code>nothing</code> indicates no expiry.</li></ul><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>There is no guarantee on the order in which handlers run, except that catch-all (<a href="events.html#Discord.AbstractEvent"><code>AbstractEvent</code></a>) handlers run before specific ones.</p></div></div></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/client.jl#LL148-L179">source</a><div><div><pre><code class="language-none">add_handler!(
    c::Client,
    m::Module;
    tag::Symbol=gensym(),
    expiry::Union{Int, Period, Nothing}=nothing,
)</code></pre><p>Add all of the event handlers defined in a module. Any function you wish to use as a handler must be exported. Only functions with correct type signatures (see above) are used.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>If you specify a <code>tag</code> and/or <code>expiry</code>, it&#39;s applied to all of the handlers in the module. That means if you add two handlers for the same event type, one of them will be immediately overwritten.</p></div></div></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/client.jl#LL219-L234">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.delete_handler!" href="#Discord.delete_handler!"><code>Discord.delete_handler!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">delete_handler!(c::Client, T::Type{&lt;:AbstractEvent})
delete_handler!(c::Client, T::Type{&lt;:AbstractEvent}, tag::Symbol)</code></pre><p>Delete event handlers. If no <code>tag</code> is supplied, all handlers for the event are deleted. Using the tagless method is generally not recommended because it also clears default handlers which maintain the client state. If you do want to delete a default handler, use <a href="client.html#Discord.DEFAULT_HANDLER_TAG"><code>DEFAULT_HANDLER_TAG</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/client.jl#LL252-L260">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.DEFAULT_HANDLER_TAG" href="#Discord.DEFAULT_HANDLER_TAG"><code>Discord.DEFAULT_HANDLER_TAG</code></a> — <span class="docstring-category">Constant</span>.</div><div><div><p>Tag assigned to default handlers, which you can use to delete them.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/client.jl#LL9-L11">source</a></section><h2><a class="nav-anchor" id="Bot-Commands-1" href="#Bot-Commands-1">Bot Commands</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.add_command!" href="#Discord.add_command!"><code>Discord.add_command!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">add_command!(
    c::Client,
    prefix::AbstractString,
    func::Function;
    tag::Symbol=gensym(),
    expiry::Union{Int, Period, Nothing}=nothing,
)
add_command!(
    func::Function;
    c::Client,
    prefix::AbstractString,
    tag::Symbol=gensym(),
    expiry::Union{Int, Period, Nothing}=nothing,
)</code></pre><p>Add a text command handler. The handler function should take two arguments: A <a href="client.html#Discord.Client"><code>Client</code></a> and a <a href="types.html#Discord.Message"><code>Message</code></a>. The keyword arguments are identical to <a href="client.html#Discord.add_handler!"><code>add_handler!</code></a>. <code>do</code> syntax is also accepted.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/commands.jl#LL3-L23">source</a></section><h2><a class="nav-anchor" id="Gateway-Commands-1" href="#Gateway-Commands-1">Gateway Commands</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.request_guild_members" href="#Discord.request_guild_members"><code>Discord.request_guild_members</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">request_guild_members(
    c::Client,
    guilds::Union{Integer, Vector{&lt;:Integer};
    query::AbstractString=&quot;&quot;,
    limit::Int=0,
) -&gt; Bool</code></pre><p>Request offline guild members of one or more <a href="types.html#Discord.Guild"><code>Guild</code></a>s. <a href="events.html#Discord.GuildMembersChunk"><code>GuildMembersChunk</code></a> events are sent by the gateway in response. More details <a href="https://discordapp.com/developers/docs/topics/gateway#request-guild-members">here</a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/gateway.jl#LL124-L135">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.update_voice_state" href="#Discord.update_voice_state"><code>Discord.update_voice_state</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">update_voice_state(
    c::Client,
    guild::Integer,
    channel::Union{Integer, Nothing},
    mute::Bool,
    deaf::Bool,
) -&gt; Bool</code></pre><p>Join, move, or disconnect from a voice channel. A <a href="events.html#Discord.VoiceStateUpdate"><code>VoiceStateUpdate</code></a> event is sent by the gateway in response. More details <a href="https://discordapp.com/developers/docs/topics/gateway#update-voice-state">here</a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/gateway.jl#LL159-L171">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.update_status" href="#Discord.update_status"><code>Discord.update_status</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">update_status(
    c::Client,
    since::Union{Int, Nothing},
    activity::Union{Activity, Nothing},
    status::Union{PresenceStatus, AbstractString},
    afk::Bool,
) -&gt; Bool</code></pre><p>Indicate a presence or status update. A <a href="events.html#Discord.PresenceUpdate"><code>PresenceUpdate</code></a> event is sent by the gateway in response. More details <a href="https://discordapp.com/developers/docs/topics/gateway#update-status">here</a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/gateway.jl#LL188-L200">source</a></section><h2><a class="nav-anchor" id="Caching-1" href="#Caching-1">Caching</a></h2><p>By default, most data that comes from Discord is cached for later use. However, to avoid memory leakage, some of it is deleted after some time. The default settings are to keep everything but <a href="types.html#Discord.Message"><code>Message</code></a>s forever, but they can be overridden in the <a href="client.html#Discord.Client"><code>Client</code></a> constructor. Although it&#39;s not recommended, you can disable caching of certain data by clearing default handlers for relevant event types with <a href="client.html#Discord.delete_handler!"><code>delete_handler!</code></a> and <a href="client.html#Discord.DEFAULT_HANDLER_TAG"><code>DEFAULT_HANDLER_TAG</code></a>. For example, if you wanted to avoid caching any messages at all, you would delete handlers for <a href="events.html#Discord.MessageCreate"><code>MessageCreate</code></a> and <a href="events.html#Discord.MessageUpdate"><code>MessageUpdate</code></a> events. You can also enable and disable the cache with <a href="client.html#Discord.enable_cache!"><code>enable_cache!</code></a> and <a href="client.html#Discord.disable_cache!"><code>disable_cache!</code></a>, which both support <code>do</code> syntax for temporarily altering behaviour.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.enable_cache!" href="#Discord.enable_cache!"><code>Discord.enable_cache!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">enable_cache!(c::Client)
enable_cache!(f::Function c::Client)</code></pre><p>Enable the cache. <code>do</code> syntax is also supported.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/client.jl#LL130-L135">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Discord.disable_cache!" href="#Discord.disable_cache!"><code>Discord.disable_cache!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">disable_cache!(c::Client)
disable_cache!(f::Function, c::Client)</code></pre><p>Disable the cache. <code>do</code> syntax is also supported.</p></div></div><a class="source-link" target="_blank" href="https://github.com/PurgePJ/Discord.jl/blob/586eb25d00fdd70c00267b404d47c8ffe5b70376/src/client.jl#LL139-L144">source</a></section><h2><a class="nav-anchor" id="Sharding-1" href="#Sharding-1">Sharding</a></h2><p>Sharding is handled automatically: The number of available processes is the number of shards that are created. See the <a href="https://github.com/PurgePJ/Discord.jl/blob/master/examples/sharding.jl">sharding example</a> for more details.</p><footer><hr/><a class="previous" href="index.html"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="events.html"><span class="direction">Next</span><span class="title">Events</span></a></footer></article></body></html>
